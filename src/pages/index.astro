---
import BaseLayout from '../layouts/BaseLayout.astro';

import json from '../static/collection.json';
import { groupCollectionsByTime } from '../helpers/collections';
import { TimeDirectory } from '../components/Directories'

// Full Astro Component Syntax:
// https://docs.astro.build/core-concepts/astro-components/
const date = new Date().toISOString();
const collections = json.map(item => item.collections).flat();

const cardLinkIncludedProperties = { category: true, expression: true };
---
<BaseLayout pages={[{ href: '/', title: 'Home' }]}>
  <!-- TODO(imballinst): add client:visible because we're using React hooks. Not possible atm with the Date bug. -->
  <TimeDirectory updateDate={date} collections={collections} cardLinkIncludedProperties={cardLinkIncludedProperties} />
</BaseLayout>
